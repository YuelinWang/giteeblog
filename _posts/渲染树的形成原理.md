---
title: 渲染树的形成原理
excerpt: 一篇关于渲染树的形成原理的文章
categories:
- 技术文章
tags:
- DOM
- 浏览器
- 面试
---

## 什么是DOM
DOM是Document Object Model（文档对象模型）的缩写。

W3C 文档对象模型 （DOM） 是中立于平台和语言的接口，它允许程序和脚本动态地访问和更新文档的内容、结构和样式。-这是W3Cschool给的概念

看了上面的概念好像太“官方”，解释就是 DOM 是对 HTML 文档结构化的表述，后端服务器返回给浏览器渲染引擎的 HTML 文件字节流是无法直接被浏览器渲染引擎理解的，要转化为渲染器引擎可以理解的内部结构，这个结构就是 DOM。W3C 那个概念我好像还没有把它全部翻译完，“允许程序和脚本动态地访问和更新文档的内容、结构和样式”。这里其实就是DOM的作用了：

1. **页面展示**: DOM 是生成页面的基础数据结构。
2. **JavaScript 脚本操作**: DOM 提供给 JavaScript 脚本操作的接口，JavaScript 可以通过这些接口对 DOM 结构进行访问，从而改变文档的结构和样式。
3. **安全**: DOM 是一道安全防线，DOM 解析阶段会过滤掉一些不安全的 DOM 内容。

本文我主要以 Webkit 渲染引擎来讲解，Safari 和 Chrome 都使用 Webkit。Webkit 是一款开源渲染引擎，它本来是为 linux 平台研发的，后来由 Apple 移植到 Mac 及 Windows 上。

## 渲染树最终形成经历了哪些
先看一张整体的流程图

![]()

下面围绕这张图和不同代表性对例子进行讲解。

### HTML解析器
从后端返回给浏览器渲染引擎 HTML 文件字节流，第一步要经过的就是渲染引擎中的 HTML 解析器。它实现了将 HTML 字节流转换为 DOM树 结构。HTML 文件字节流返回的过程中 HTML 解析器就一直在解析，边加载边解析哦(这里注意下，有些文章写的有问题)。

例子1:最简单的不带 CSS 和 JavaScript 的 HTML 代码讲解 HTML 解析器

```html
<html>
    <body>
        <div>
            程序员成长指北
        </div>
    </body>
</html>
```

根据这段代码具体分析 HTML 解析器做了哪些事。


